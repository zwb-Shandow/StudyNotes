# 单例模式

## 1. 实现单例的共同步骤
 - 将默认构造函数设为私有,防止其他对象使用单例类的new运算符.

 - 新建一个静态构建方法作为构造函数.该函数会调用私有构造函数来创建对象,并将其保存在
 一个静态成员变量中.此后所有对于该函数的调用都将返回这一个缓存对象.

> 注: 单例的构造函数必须对客户端代码隐藏.调用`获取实例`方法必须是获取单例对象的唯一方式.

## 2. 实现方式
1. 在类中添加一个私有静态成员变量用于保存单例实例.
2. 声明一个公有静态构建方法用于获取单例实例.
3. 在静态方法中实现"延迟初始化".该方法会在首次被调用时创建一个新对象,并将其存储在静态
成员变量中.此后该方法每次被调用时都返回该实例.
4. 将类的构造函数设为私有.类的静态方法仍然能调用构造函数,但是其他对象不能调用.
5. 检查客户端代码,将对单例的构造函数的调用替换为对其静态构建方法的调用.

## 3. 单例模式优缺点
|                 优点                 |           缺点           |
| :----------------------------------: | :----------------------: |
|      可以保证一个类只有一个实例      |    违反了单一职责原则    |
|   获得一个指向该实例的全局访问节点   |     可能掩盖不良设计     |
| 仅在首次请求单例对象时对齐进行初始化 | 多线程环境下需要特殊处理 |
|                                      |     单元测试较为困难     |

## 4. 单例类型
| 懒汉模式 | 饿汉模式 |
| :------: | :------: |
| 延迟加载 | 提前加载 |

## 5. 代码示例

- [singleton](../code/design_pattern/singleton)

## 参考链接

[1] [深入浅出工厂模式](https://zhuanlan.zhihu.com/p/83535678)
