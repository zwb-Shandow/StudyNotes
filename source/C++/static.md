# static

静态数据成员要在程序一开始运行时就必须存在。因为函数在程序运行中被调用，所以静态数据成员不能在任何函数内分配空间和初始化。

## 1. 面向过程
### 1.1 静态全局变量
#### 特点
 - 在全局区分配内存，初始化的静态全局变量放在.data段，未初始化的静态全局变量放在.bss段
 - 仅在当前文件可见
### 1.2 静态局部变量
#### 特点
 - 在全局区分配内存
 - 在程序执行到该对象的声明处时被首次初始化，即以后的函数调用不再进行初始化
 - 静态局部变量一般在声明处初始化，如果没有显式初始化，会被程序自动初始化为0
### 1.3 静态函数
#### 特点
 - 与静态全局变量类似，仅在当前文件可见

## 2. 面向对象
### 2.1 静态成员变量
#### 特点
 - 静态成员变量属于类，不属于具体类对象，不占用对象的内存，只能在类的内部声明，在**类外定义**
 - 初始化方式
   - <数据类型> <类名>::<静态数据成员>=<值>
 - 访问方式:
   - 遵从 public, protected, private 规则
   - <类名>::<静态数据成员名>
   - <类对象名>.<静态数据成员名>
   - <类对象名>-><静态数据成员名>
### 2.2 静态成员函数
#### 特点
 - 静态成员函数属于类，不属于具体类对象
 - 静态成员函数仅能访问静态成员变量、静态成员函数，非静态成员函数可以任意访问静态成员函数和静态成员变量
 - 没有 this 指针的额外开销，执行速度上高于类的全局函数
 - 访问方式:
   - <类名>::<静态成员函数名>(<参数表>)
   - <类对象名>.<静态成员函数名>(<参数表>)
   - <类对象名>-><静态成员函数名>(<参数表>)
#### 典型应用
 - 单例


## 1. 修饰变量

### 1.1 修饰普通变量

修改变量的存储区域和生命周期，使变量存储在静态区，在 main 函数运行前就分配了空间，如果有初始值就用初始值初始化它，如果没有初始值系统用默认值初始化它。

### 1.2 修饰类成员变量

修饰成员变量使所有的对象只保存一个该变量，而且不需要生成对象就可以访问该成员。‘

类成员变量只允许在类内声明，在类外定义(若初始化，则放在DATA段；若未初始化，则放在BSS段)

因为静态数据成员在**全局数据区分配内存(初始化时分配)**，由本类的所有对象共享，所以，它不属于特定的类对象，不占用对象的内存，而是<font color=red>在所有对象之外开辟内存</font>，在没有产生类对象时其作用域就可见。初始化时可以赋初值，也可以不赋值。如果不赋值，那么会被默认初始化，一般是 0。静态数据区的变量都有默认的初始值，而动态数据区（堆区、栈区）的变量默认是垃圾值。

## 2. 修饰函数

> 优点:
>
> (1)其他文件中可以定义相同名字的函数，不会发生冲突
>
> (2)静态函数不能被其他文件所用

### 2.1 修饰类成员函数

调用这个函数不会访问或修改任何对象(非static)数据成员。

**类的静态成员(变量和方法)属于类本身**，在类加载的时候就会分配内存，可以通过类名直接去访问；非静态成员(变量和方法)属于类的对象，只有在类的对象产生(创建类的实例)时才会分配内存，然后通过类的对象(实例)去访问。

### 2.2 修饰普通函数

用static修饰的函数，限定在本源码文件中，不能被本源码文件以外的代码文件调用。而普通的函数，默认是extern的，也就是说它可以被其它代码文件调用。

## 参考链接

[1] [https://www.runoob.com/w3cnote/cpp-static-usage.html](https://www.runoob.com/w3cnote/cpp-static-usage.html)

[2] [https://github.com/huihut/interview#stl](https://github.com/huihut/interview#stl)
